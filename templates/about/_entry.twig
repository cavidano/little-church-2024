{% extends "_layout.twig" %}

{% block content %}

<div class="border-top padding-y-2">

	<div class="container wide">

		<ul class="nav-breadcrumb font-size-sm">
			<li>
				<a href="#1">
					<span class="icon icon-home" aria-hidden="true"></span>
				</a>
			</li>
			<li>
				<em>
					{{ entry.section }}
				</em>
			</li>
			<li class="text-color-primary">
				{{ entry.title }}
			</li>
		</ul>

	</div>
	
</div>

<main id="skip-header-target">

	<article>

		<header class=" theme-primary" id="introduction">

			<div class="container narrow medium--lg text-align-center padding-y-5">

				<h1 class="banner-headline">
					{{ entry.title }}
				</h1>

			</div>

		</header>

		<div class="container narrow wide--lg">

			<div class="grid-sidebars grid--divider gap-4 margin-y-5">

				<div class="grid-sidebar__minor-start">

					<nav class="font-size-md">
						{% set currentSection = entry.section.handle %}
						
						{# Fetch child pages for the current section dynamically #}
						{% set childPages = craft.entries().section(currentSection).all() %}

						{% if childPages|length %}
							<ul class="nav theme-light border-top border-color-primary padding-3 position-sticky-top">

							{% for page in childPages %}
								<li>
									<a href="{{ page.url }}" 
										{% if page.id == entry.id %}aria-current="page"{% endif %}>
            							{{ page.title }}
          							</a>
								</li>
							{% endfor %}
							
							</ul>
						{% endif %}
					</nav>

				</div>

				<div class="grid-sidebar__major">

					<div class="grid-sidebar__major__container">

						{% if entry.heroImage | length %}
						{% set image = entry.heroImage.one() %}

							<figure>

								<img
									src="{{ image.url }}"
									alt="{{ image.alt ?? '' }}"
								/>

								{% if entry.heroCaption %}
								<figcaption class="container narrow">
									<p>
										{{ entry.heroCaption }}
									</p>
								</figcaption>
								{% endif %}
							</figure>

						{% endif %}

						<div>
						
							{# Loop through the Matrix blocks #}
							{% for block in entry.articleContent.all() %}
							
							{# Handle the Rich Text block #}
							{% if block.type.handle == 'richText' %}

							<div class="container narrow margin-y-4">
								
								{{ block.richTextContent }}
							
							</div>
							
							{# Handle the Figure Image block #}
							{% elseif block.type.handle == 'figureImage' %}
								<figure class="margin-y-5">
								{% set image = block.figureImage.one() %}
								{% if image %}
									<img src="{{ image.url }}" alt="{{ image.alt }}" />
								{% endif %}
								{% if block.figureCaption %}
									<figcaption class="container narrow">
										<p>
											{{ block.figureCaption }}
										</p>
									</figcaption>
								{% endif %}
								</figure>
							
							{% endif %}
							
							{% endfor %}

						</div>

						<footer class="border-top padding-top-3 font-size-sm margin-top-4">
							<div class="grid grid--column-3 gap-2 align-items-center">
							
								<a class="button ðŸ‘‰ button--has-icon" href="#1">
									<span class="icon icon-facebook"></span>
									<span class="button__text">Share</span>
								</a>
							
								<a class="button ðŸ‘‰ button--has-icon" href="#1">
									<span class="icon icon-twitter"></span>
									<span class="button__text">Tweet</span>
								</a>
							
								<a class="button ðŸ‘‰ button--has-icon" href="#1">
									<span class="icon icon-mail"></span>
									<span class="button__text">Send</span>
								</a>
							</div>
						</footer>

					</div>
				</div>

				<div class="grid-sidebar__minor-end">

					<div>
						
						<a class="backdrop theme-dark" href="#1">

							<div class="backdrop__media">
								<img class="opacity-50" src="https://via.placeholder.com/1500x750" alt="Placeholder" />
							</div>

							<div class="backdrop__cover align-content-end justify-content-start">

								<div class="container text-align-center">
									<h3 class="h6">
										Clergy &amp; Staff
									</h3>
								</div>

							</div>

						</a>

					</div>


				</div>

			</div>

		</div>

	</article>

</main>

{% endblock %}